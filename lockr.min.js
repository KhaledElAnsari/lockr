var Lockr=function(){"use strict";var lockObj={};return lockObj.prefix="",lockObj._getPrefixedKey=function(key,options){return options=options||{},options.noPrefix?key:this.prefix+key},lockObj.set=function(key,value,options){var query_key=this._getPrefixedKey(key,options);try{localStorage.setItem(query_key,JSON.stringify({data:value}))}catch(e){console&&console.warn("lockObj didn't successfully save the '{"+key+": "+value+"}' pair, because the localStorage is full.")}},lockObj.get=function(key,missing,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=localStorage[query_key]?{data:localStorage.getItem(query_key)}:null}return value?"object"==typeof value&&"undefined"!=typeof value.data?value.data:void 0:missing},lockObj.sadd=function(key,value,options){var json,query_key=this._getPrefixedKey(key,options),values=lockObj.smembers(key);if(values.indexOf(value)>-1)return null;try{values.push(value),json=JSON.stringify({data:values}),localStorage.setItem(query_key,json)}catch(e){console.log(e),console.warn("lockObj didn't successfully add the "+value+" to "+key+" set, because the localStorage is full.")}},lockObj.smembers=function(key,options){var value,query_key=this._getPrefixedKey(key,options);try{value=JSON.parse(localStorage.getItem(query_key))}catch(e){value=null}return value&&value.data?value.data:[]},lockObj.sismember=function(key,value,options){return lockObj.smembers(key).indexOf(value)>-1},lockObj.keys=function(){var keys=[],allKeys=Object.keys(localStorage);return 0===lockObj.prefix.length?allKeys:(allKeys.forEach(function(key){key.indexOf(lockObj.prefix)>-1&&keys.push(key.replace(lockObj.prefix,""))}),keys)},lockObj.getAll=function(includeKeys){var keys=lockObj.keys();return includeKeys?keys.reduce(function(accum,key){var tempObj={};return tempObj[key]=lockObj.get(key),accum.push(tempObj),accum},[]):keys.map(function(key){return lockObj.get(key)})},lockObj.srem=function(key,value,options){var json,query_key=this._getPrefixedKey(key,options),values=lockObj.smembers(key,value),index=values.indexOf(value);index>-1&&values.splice(index,1),json=JSON.stringify({data:values});try{localStorage.setItem(query_key,json)}catch(e){console&&console.warn("lockObj couldn't remove the "+value+" from the set "+key)}},lockObj.rm=function(key){var queryKey=this._getPrefixedKey(key);localStorage.removeItem(queryKey)},lockObj.flush=function(){lockObj.prefix.length?lockObj.keys().forEach(function(key){localStorage.removeItem(lockObj._getPrefixedKey(key))}):localStorage.clear()},lockObj}();"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=Lockr),exports.Lockr=Lockr);